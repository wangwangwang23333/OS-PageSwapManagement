(function(t){function e(e){for(var i,s,c=e[0],o=e[1],u=e[2],b=0,h=[];b<c.length;b++)s=c[b],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);l&&l(e);while(h.length)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,c=1;c<n.length;c++){var o=n[c];0!==r[o]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},r={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/OS-PageSwapManagement/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1900:function(t,e,n){"use strict";n("28c7")},"28c7":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23"),r=n("3fd4"),a=(n("7dd6"),{id:"app"}),s={href:"https://sse.tongji.edu.cn/"},c={style:{position:"relative",right:"-420px"}},o=Object(i["m"])("span",{style:{"text-align":"right"}},"操作系统课程项目 | 内存管理",-1),u=Object(i["m"])("i",{class:"el-icon-more",style:{"margin-left":"18px","margin-right":"20px"}},null,-1),l=Object(i["l"])("说明"),b=Object(i["l"])("离开"),h=Object(i["m"])("i",{class:"el-icon-s-custom",style:{"margin-left":"18px","margin-right":"4px"}},null,-1),f=Object(i["l"])("1851055 汪明杰"),p=Object(i["m"])("p",null,"缺页数",-1),m=Object(i["m"])("p",null,"缺页率",-1),d=Object(i["m"])("h4",null,"已执行指令",-1);function O(t,e,n,r,O,j){var g=Object(i["M"])("el-image"),v=Object(i["M"])("el-dropdown-item"),y=Object(i["M"])("el-dropdown-menu"),P=Object(i["M"])("el-dropdown"),I=Object(i["M"])("el-link"),x=Object(i["M"])("el-space"),w=Object(i["M"])("el-header"),k=Object(i["M"])("Information"),S=Object(i["M"])("el-divider"),M=Object(i["M"])("el-aside"),_=Object(i["M"])("MemoryStation"),F=Object(i["M"])("instruction-table"),$=Object(i["M"])("el-main"),C=Object(i["M"])("el-container"),D=Object(i["M"])("button-control"),T=Object(i["M"])("el-footer");return Object(i["D"])(),Object(i["i"])("div",a,[Object(i["m"])(C,{style:{"margin-top":"10px"}},{default:Object(i["bb"])((function(){return[Object(i["m"])(w,null,{default:Object(i["bb"])((function(){return[Object(i["m"])(x,{alignment:"flex-start"},{default:Object(i["bb"])((function(){return[Object(i["m"])("a",s,[Object(i["m"])(g,{src:"https://z3.ax1x.com/2021/06/04/2Y8EWV.jpg",style:{width:"200px",float:"left",position:"relative",left:"-420px"}})]),Object(i["m"])("div",c,[o,Object(i["m"])(P,null,{dropdown:Object(i["bb"])((function(){return[Object(i["m"])(y,null,{default:Object(i["bb"])((function(){return[Object(i["m"])(v,{onClick:j.instructInfo},{default:Object(i["bb"])((function(){return[l]})),_:1},8,["onClick"]),Object(i["m"])(v,{onClick:j.exit},{default:Object(i["bb"])((function(){return[b]})),_:1},8,["onClick"])]})),_:1})]})),default:Object(i["bb"])((function(){return[u]})),_:1}),h,Object(i["m"])(I,{href:"https://github.com/wangwangwang23333",target:"前往github首页"},{default:Object(i["bb"])((function(){return[f]})),_:1})])]})),_:1})]})),_:1}),Object(i["m"])(C,{style:{height:"600px"},direction:"horizontal"},{default:Object(i["bb"])((function(){return[Object(i["m"])(M,{style:{"background-color":"rgb(238, 241, 246)","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)",height:"640px",width:"300px"}},{default:Object(i["bb"])((function(){return[Object(i["m"])(k,{"sum-instruction":t.sumInstruction,"replace-algorithm":t.replaceAlgorithm,"execution-sequence":t.executionSequence,"instruction-each-page":t.instructionEachPage,"memory-page":t.memoryPage,ref:"information"},null,8,["sum-instruction","replace-algorithm","execution-sequence","instruction-each-page","memory-page"]),Object(i["m"])(S),p,Object(i["m"])("h3",null,Object(i["Q"])(t.missingPage),1),m,Object(i["m"])("h3",null,Object(i["Q"])(j.missingRate)+"%",1)]})),_:1}),Object(i["m"])($,{style:{"min-height":"600px"}},{default:Object(i["bb"])((function(){return[Object(i["m"])(x,{alignment:"flex-start"},{default:Object(i["bb"])((function(){return[Object(i["m"])(_,{ref:"memoryStation",align:"center"},null,512),Object(i["m"])("div",null,[d,Object(i["m"])(F,{ref:"instructionTable",class:"table_pos"},null,512)])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(i["m"])(T,null,{default:Object(i["bb"])((function(){return[Object(i["m"])(D)]})),_:1})])}n("b680"),n("a434");var j=Object(i["fb"])("data-v-70086f48");Object(i["G"])("data-v-70086f48");var g=Object(i["m"])("p",null,"作业指令总数",-1),v=Object(i["m"])("p",null,"每页存放指令数",-1),y=Object(i["m"])("p",null,"作业占用内存页数",-1),P=Object(i["m"])("p",null,"页面置换算法",-1),I=Object(i["m"])("p",null,"指令执行顺序",-1);Object(i["E"])();var x=j((function(t,e,n,r,a,s){var c=Object(i["M"])("el-option"),o=Object(i["M"])("el-select");return Object(i["D"])(),Object(i["i"])("div",null,[g,Object(i["m"])("h3",null,Object(i["Q"])(n.sumInstruction),1),v,Object(i["m"])("h3",null,Object(i["Q"])(n.instructionEachPage),1),y,Object(i["m"])("h3",null,Object(i["Q"])(n.memoryPage),1),P,Object(i["m"])(o,{modelValue:t.algorithmValue,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.algorithmValue=e}),placeholder:"请选择"},{default:j((function(){return[(Object(i["D"])(!0),Object(i["i"])(i["b"],null,Object(i["K"])(t.algorithmOptions,(function(t){return Object(i["D"])(),Object(i["i"])(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]),I,Object(i["m"])(o,{modelValue:t.sequenceValue,"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.sequenceValue=e}),placeholder:"请选择"},{default:j((function(){return[(Object(i["D"])(!0),Object(i["i"])(i["b"],null,Object(i["K"])(t.sequence,(function(t){return Object(i["D"])(),Object(i["i"])(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])])})),w=(n("d3b7"),n("143c"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),{data:function(){return{show:!0,algorithmOptions:[{value:"FIFO",label:"FIFO算法"},{value:"LRU",label:"LRU算法"}],algorithmValue:"FIFO",sequence:[{value:"skip",label:"混合执行"},{value:"sequential",label:"顺序执行"},{value:"random",label:"随机执行"}],sequenceValue:"skip"}},name:"Information",props:{sumInstruction:Int32Array,instructionEachPage:Int32Array,memoryPage:Int32Array,replaceAlgorithm:String,executionSequence:String}});n("5ca9");w.render=x,w.__scopeId="data-v-70086f48";var k=w,S=Object(i["fb"])("data-v-d2cf2574");Object(i["G"])("data-v-d2cf2574");var M=Object(i["m"])("h4",null,"内存中的页面图示",-1);Object(i["E"])();var _=S((function(t,e,n,r,a,s){var c=Object(i["M"])("memory-block"),o=Object(i["M"])("el-col"),u=Object(i["M"])("el-row");return Object(i["D"])(),Object(i["i"])("div",null,[M,Object(i["m"])(u,null,{default:S((function(){return[(Object(i["D"])(),Object(i["i"])(i["b"],null,Object(i["K"])(4,(function(e){return Object(i["m"])(o,{key:e,span:0},{default:S((function(){return[Object(i["m"])(c,{ref:function(n){n&&(t.divs[e-1]=n)}},null,512)]})),_:2},1024)})),64))]})),_:1})])})),F=Object(i["fb"])("data-v-e9b4e268");Object(i["G"])("data-v-e9b4e268");var $={class:"card-header"},C={key:0},D={key:0,style:{color:"#b3b5bb"}};Object(i["E"])();var T=F((function(t,e,n,r,a,s){var c=Object(i["M"])("el-card"),o=Object(i["M"])("el-space");return Object(i["D"])(),Object(i["i"])(o,{wrap:"",size:"mini",spacer:t.spacer},{default:F((function(){return[Object(i["m"])(c,{class:"box-card",style:{width:"150px"}},{header:F((function(){return[Object(i["m"])("div",$,[t.appears?(Object(i["D"])(),Object(i["i"])("span",C,"第"+Object(i["Q"])(t.page)+"页",1)):Object(i["j"])("",!0)])]})),default:F((function(){return[t.firstAppear?(Object(i["D"])(),Object(i["i"])("span",D,"空")):Object(i["j"])("",!0),(Object(i["D"])(),Object(i["i"])(i["b"],null,Object(i["K"])(10,(function(e){return Object(i["m"])("div",{key:e},[Object(i["m"])(i["d"],{name:"el-fade-in",ref:function(n){n&&(t.box[e-1]=n)}},{default:F((function(){return[Object(i["cb"])(Object(i["m"])("div",{class:"transition-box",style:"background-color: "+t.colorNow,ref:function(n){n&&(t.divs[e-1]=n)}},Object(i["Q"])(e-1),5),[[i["Y"],t.appears]])]})),_:2},1536)])})),64))]})),_:1})]})),_:1},8,["spacer"])})),R={name:"memoryBlock",data:function(){return{appears:!1,page:0,divs:[],show:!0,box:[],colorNow:"#6db2fa",redcolor:"#d43346",curcolor:"#6db2fa",spacer:Object(i["p"])(r["a"],{direction:"vertical"}),firstAppear:!0}},watch:{},methods:{appear:function(){this.appears=!this.appears,this.firstAppear=!1},move:function(t){var e=this.box[t].style.backgroundColor;this.box[t].style.backgroundColor=this.redcolor;var n=this;setTimeout((function(){n.box[t].style.backgroundColor=n.colorNow}),500),console.log(e)},state:function(){return this.appears},disapppear:function(){this.appears=!1}}};n("b5dd");R.render=T,R.__scopeId="data-v-e9b4e268";var U=R,V={name:"memoryStation",components:{MemoryBlock:U},data:function(){return{divs:[],empty:!0}},methods:{memoryAppear:function(t){this.empty=!1,this.divs[t].appear(),this.divs[t].page=t},changePage:function(t,e){this.divs[t].page=e,this.divs[t].disapppear();var n=this;setTimeout((function(){n.divs[t].appear()}),300)},move:function(t,e){this.divs[t].move(e)},blockEmpty:function(){for(var t=0;t<this.divs.length;++t)this.divs[t].disapppear(),this.divs[t].firstAppear=!0;this.empty=!0}}};V.render=_,V.__scopeId="data-v-d2cf2574";var A=V,L=Object(i["fb"])("data-v-3a8ba487"),q=L((function(t,e,n,r,a,s){var c=Object(i["M"])("el-table-column"),o=Object(i["M"])("el-table");return Object(i["D"])(),Object(i["i"])("div",null,[Object(i["m"])(o,{data:t.tableData,"highlight-current-row":"",onCurrentChange:s.handleCurrentChange,height:"360px",ref:"table","empty-text":"暂无已执行过的指令"},{default:L((function(){return[Object(i["m"])(c,{prop:"index",label:"",width:"50"}),Object(i["m"])(c,{prop:"place",label:"地址",width:"100"}),Object(i["m"])(c,{prop:"loss",label:"缺页",width:"80"}),Object(i["m"])(c,{prop:"outpage",label:"换出页",width:"80"}),Object(i["m"])(c,{prop:"inpage",label:"换入页",width:"80"})]})),_:1},8,["data","onCurrentChange"])])})),E={name:"instructionTable",data:function(){return{tableData:[],currentRow:null}},watch:{},methods:{addData:function(t){this.tableData.push(t)},handleCurrentChange:function(t){this.currentRow=t},setCurrent:function(){this.$refs.table.setCurrentRow(this.tableData[this.tableData.length-1])}}};E.render=q,E.__scopeId="data-v-3a8ba487";var z=E,Q=Object(i["fb"])("data-v-e88772b8");Object(i["G"])("data-v-e88772b8");var B=Object(i["l"])("单步执行"),K=Object(i["l"])("连续执行"),G=Object(i["l"])("重置");Object(i["E"])();var N=Q((function(t,e,n,r,a,s){var c=Object(i["M"])("el-button"),o=Object(i["M"])("el-space");return Object(i["D"])(),Object(i["i"])(o,{size:a.size,spacer:a.spacer},{default:Q((function(){return[Object(i["m"])(c,{round:"",type:"primary",icon:"el-icon-arrow-right",onClick:e[1]||(e[1]=function(e){return t.$parent.$parent.nextInstruct()})},{default:Q((function(){return[B]})),_:1}),Object(i["m"])(c,{round:"",type:"info",icon:"el-icon-d-arrow-right",onClick:e[2]||(e[2]=function(e){return t.$parent.$parent.keepInstruct()})},{default:Q((function(){return[K]})),_:1}),Object(i["m"])(c,{round:"",type:"warning",icon:"el-icon-refresh-right",onClick:e[3]||(e[3]=function(e){return t.$parent.$parent.restart()})},{default:Q((function(){return[G]})),_:1})]})),_:1},8,["size","spacer"])})),J={name:"buttonControl",methods:{},data:function(){return{size:10,spacer:Object(i["p"])(r["a"],{direction:"vertical"})}}};J.render=N,J.__scopeId="data-v-e88772b8";var Y=J,H=n("cffa"),W={name:"App",components:{ButtonControl:Y,InstructionTable:z,MemoryStation:A,Information:k},created:function(){this.instruction=new Array(this.sumInstruction);for(var t=0;t<this.sumInstruction;++t)this.instruction[t]={place:t,page:Math.floor(t/this.instructionEachPage),placeInPage:t%this.instructionEachPage,finished:!1};for(var e=0;e<this.memoryPage;++e)this.LRUTable.push(-1)},watch:{missingPage:function(t){H["a"].to(this.$data,{duration:.5,animatedPage:0==this.curInstruct?0:t/this.curInstruct*100})}},computed:{missingRate:function(){return this.animatedPage.toFixed()}},methods:{restart:function(){var t=this;this.$confirm("确认重置指令状态?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.timerStart&&(clearInterval(t.timer),t.timerStart=!1),r["b"].success({message:"已重置指令状态",type:"success"}),t.$refs.instructionTable.tableData.splice(0,t.$refs.instructionTable.tableData.length),t.$refs.memoryStation.blockEmpty(),t.innerPage.splice(0,t.innerPage.length),t.FIFOPointer=0,t.skipState=0,t.lastPos=-1;for(var e=0;e<t.sumInstruction;++e)t.instruction[e].finished=!1;t.curInstruct=0,t.missingRate=0,t.missingPage=0,t.skipState=0})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},findPos:function(){if(0==this.skipState){if(-1==this.lastPos){for(var t=!0,e=80;e<240;++e)this.instruction[e].finished||(t=!1);if(t)return this.skipState=1,this.findPos();var n=-1;do{n=Math.floor(160*Math.random()+80)}while(this.instruction[n].finished);return this.lastPos=n,n}if(this.skipState=1,this.lastPos+1<this.sumInstruction&&!this.instruction[this.lastPos+1].finished){var i=this.lastPos+1;return this.lastPos=-1,i}return this.lastPos=-1,this.findPos()}if(1==this.skipState){if(-1==this.lastPos){for(var r=!0,a=0;a<80;++a)this.instruction[a].finished||(r=!1);if(r)return this.skipState=2,this.findPos();var s=-1;do{s=Math.floor(80*Math.random()+0)}while(this.instruction[s].finished);return this.lastPos=s,s}if(this.skipState=2,this.lastPos+1<this.sumInstruction&&!this.instruction[this.lastPos+1].finished){var c=this.lastPos+1;return this.lastPos=-1,c}return this.lastPos=-1,this.findPos()}if(2==this.skipState){if(-1==this.lastPos){for(var o=!0,u=240;u<320;++u)this.instruction[u].finished||(o=!1);if(o)return this.skipState=0,this.findPos();var l=-1;do{l=Math.floor(80*Math.random()+240)}while(this.instruction[l].finished);return this.lastPos=l,l}if(this.skipState=0,this.lastPos+1<this.sumInstruction&&!this.instruction[this.lastPos+1].finished){var b=this.lastPos+1;return this.lastPos=-1,b}return this.lastPos=-1,this.findPos()}},nextInstruct:function(){if(this.curInstruct==this.sumInstruction)return r["b"].success({message:"全部320条指令已执行完毕",type:"success"}),void(this.timerStart&&(clearInterval(this.timer),this.timerStart=!1));var t,e=this.$refs.information.sequenceValue;if("sequential"==e){for(var n=0;n<this.sumInstruction;++n)if(!this.instruction[n].finished){t=this.instruction[n],this.instruction[n].finished=!0;break}}else if("random"==e){var i=-1;do{i=Math.floor(Math.random()*this.sumInstruction)}while(this.instruction[i].finished);t=this.instruction[i],this.instruction[i].finished=!0}else if("skip"==e){var a=this.findPos();console.log("指令为",a,"上次为",this.lastPos),t=this.instruction[a],this.instruction[a].finished=!0}t["index"]=this.curInstruct+1;var s=!1,c=0;for(c=0;c<this.innerPage.length;++c)if(this.innerPage[c]==t["page"]){s=!0;break}if(s)t["loss"]="否",t["outpage"]="-",t["inpage"]="-",this.$refs.memoryStation.move(c,t["placeInPage"]);else{var o;if(++this.missingPage,t["loss"]="是",t["inpage"]=t["page"],this.innerPage.length<this.memoryPage)this.innerPage.push(t["page"]),this.$refs.memoryStation.memoryAppear(this.innerPage.length-1),this.$refs.memoryStation.changePage(this.innerPage.length-1,t["page"]),t["outpage"]="-",this.$refs.memoryStation.move(this.innerPage.length-1,t["placeInPage"]);else"FIFO"==this.$refs.information.algorithmValue?(console.log("通过FIFO算法进行调度"),o=this.FIFO()):"LRU"==this.$refs.information.algorithmValue&&(console.log("通过LRU算法进行调度"),o=this.LRU()),this.$refs.memoryStation.changePage(o,t["page"]),t["outpage"]=this.innerPage[o],this.innerPage[o]=t["page"],this.$refs.memoryStation.move(o,t["placeInPage"]);for(var u=0;u<this.LRUTable.length;++u)if(this.innerPage[u]==t["page"]){this.LRUTable[u]=this.curInstruct;break}}this.$refs.instructionTable.addData(t),this.$refs.instructionTable.setCurrent(),++this.curInstruct},keepInstruct:function(){if(this.curInstruct==this.sumInstruction)return r["b"].success({message:"全部320条指令已执行完毕",type:"success"}),void(this.timerStart&&(clearInterval(this.timer),this.timerStart=!1));this.timerStart?(clearInterval(this.timer),this.timerStart=!1,r["b"].success({message:"已关闭连续执行",type:"success"})):(r["b"].success({message:"已开始连续执行",type:"success"}),this.timerStart=!0,this.timer=setInterval(this.nextInstruct,10))},FIFO:function(){var t=this.FIFOPointer;return++this.FIFOPointer,this.FIFOPointer==this.innerPage.length&&(this.FIFOPointer=0),t},LRU:function(){for(var t=this.sumInstruction+1,e=-1,n=0;n<this.LRUTable.length;++n)this.LRUTable[n]<t&&(t=this.LRUTable[n],e=n);return e},instructInfo:function(){this.$alert('本项目是软件学院2021年春季学期操作系统课程第二次【内存管理】项目<br>在左侧设置好<b>页面置换算法</b>和<b>执行顺序</b>后，即可通过<b>单步执行</b>一次执行一条指令或者<b>连续执行</b>直到指令执行结束。<br>同时，在左侧可以观察<b>缺页数</b>和<b>缺页数</b><br><span style="float: right">指导老师：张慧娟</span><br>',"项目说明",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0})},exit:function(){this.$notify({title:"再见",message:"下次再见",type:"success"}),r["b"].success({message:"下次再见",type:"success"})}},data:function(){return{executionSequence:"SKIP",instructionEachPage:10,memoryPage:4,replaceAlgorithm:"FIFO",sumInstruction:320,instruction:null,curInstruct:0,innerPage:[],FIFOPointer:0,LRUTable:[],missingPage:0,animatedPage:0,timer:"",timerStart:!1,skipState:0,lastPos:-1}}};n("1900");W.render=O;var X=W,Z=Object(i["h"])(X);Z.use(r["c"]),Z.mount("#app")},"58ee":function(t,e,n){},"5ca9":function(t,e,n){"use strict";n("58ee")},b5dd:function(t,e,n){"use strict";n("c65c")},c65c:function(t,e,n){}});
//# sourceMappingURL=app.f5609dd2.js.map